{"version":3,"sources":["webpack:///F:/code/java/YaYaSite/RuoYi/web/house-life/components/likeFx/likeFx.vue?4563","webpack:///F:/code/java/YaYaSite/RuoYi/web/house-life/components/likeFx/likeFx.vue?e6fe","webpack:///F:/code/java/YaYaSite/RuoYi/web/house-life/components/likeFx/likeFx.vue?8936","webpack:///F:/code/java/YaYaSite/RuoYi/web/house-life/components/likeFx/likeFx.vue?a281","uni-app:///components/likeFx/likeFx.vue","webpack:///F:/code/java/YaYaSite/RuoYi/web/house-life/components/likeFx/likeFx.vue?6906","webpack:///F:/code/java/YaYaSite/RuoYi/web/house-life/components/likeFx/likeFx.vue?405b"],"names":[],"mappings":";;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAmH;AACnH;AAC0D;AACL;AACc;;;AAGnE;AACsM;AACtM,gBAAgB,6MAAU;AAC1B,EAAE,4EAAM;AACR,EAAE,iFAAM;AACR,EAAE,0FAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,qFAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACRA;AAAA;AAAA;AAAA;AAAqwB,CAAgB,gxBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;ACOzxB;AACA,gBADA;AAEA,MAFA,kBAEA;AACA;AACA,eADA;AAEA,eAFA;AAGA,cAHA;;AAKA,GARA;AASA;AACA;AACA,kBADA;AAEA,mBAFA,EADA;;AAKA;AACA,kBADA;AAEA,kBAFA,EALA,EATA;;;AAmBA,SAnBA,qBAmBA;AACA;AACA;AACA;AACA,GAvBA;AAwBA,WAxBA,uBAwBA;AACA;AACA;AACA,GA3BA;AA4BA;AACA;AACA,aAFA,uBAEA;AACA;AACA;AACA;AACA,gCADA;AAEA,gBAFA;AAGA,kBAHA;AAIA,yCAJA;AAKA,oBALA;AAMA;AACA;AACA;AACA,uBAHA,EAGA;AACA,gBAJA,CAIA;AAJA,SANA;;AAaA;AACA;AACA,OAFA,MAEA;AACA;AACA;AACA;;AAEA;AACA,KA1BA;AA2BA;AACA,aA5BA,qBA4BA,GA5BA,EA4BA,GA5BA,EA4BA;AACA;AACA,KA9BA;AA+BA;AACA,gBAhCA,wBAgCA,GAhCA,EAgCA,GAhCA,EAgCA;AACA;AACA,KAlCA;AAmCA;AACA,oBApCA,8BAoCA;AACA;AACA,0BADA;AAEA;AACA,uBADA;AAEA,iBAFA;;AAIA;AACA,qDADA;AAEA,sDAFA;;AAIA;AACA,0CADA;AAEA,sDAFA;;AAIA;AACA,0CADA;AAEA,4CAFA;;AAIA;AACA,KAxDA;AAyDA;AACA,cA1DA,sBA0DA,IA1DA,EA0DA,MA1DA,EA0DA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,YADA;AAEA,YAFA;;AAIA,KAlFA;AAmFA;AACA,iBApFA,2BAoFA;AACA;AACA,0BADA;AAEA;AACA,6CADA;;;;AAKA;AACA,6BADA;AAEA,2BAFA,CALA,CAGA,CAHA,oBAGA,CAHA,CAIA,CAJA,oBAIA,CAJA;;AASA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,sCAjBA,CAiBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OA7BA;AA8BA;AACA;AACA;AACA;AACA,SAFA,EAEA,CAFA;AAGA,OAJA,MAIA;AACA;AACA,wBAFA,CAEA;AACA;AACA,KA9HA;AA+HA,cA/HA,wBA+HA;AACA;AACA;AACA;AACA,KAnIA,EA5BA,E;;;;;;;;;;;;;ACPA;AAAA;AAAA;AAAA;AAA24C,CAAgB,01CAAG,EAAC,C;;;;;;;;;;;ACA/5C;AACA,OAAO,KAAU,EAAE,kBAKd","file":"components/likeFx/likeFx.js","sourcesContent":["import { render, staticRenderFns, recyclableRender, components } from \"./likeFx.vue?vue&type=template&id=2e335c24&\"\nvar renderjs\nimport script from \"./likeFx.vue?vue&type=script&lang=js&\"\nexport * from \"./likeFx.vue?vue&type=script&lang=js&\"\nimport style0 from \"./likeFx.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!C:\\\\Users\\\\Administrator\\\\Downloads\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"components/likeFx/likeFx.vue\"\nexport default component.exports","export * from \"-!C:\\\\Users\\\\Administrator\\\\Downloads\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\templateLoader.js??vue-loader-options!C:\\\\Users\\\\Administrator\\\\Downloads\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--16-0!C:\\\\Users\\\\Administrator\\\\Downloads\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!C:\\\\Users\\\\Administrator\\\\Downloads\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-uni-app-loader\\\\page-meta.js!C:\\\\Users\\\\Administrator\\\\Downloads\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!C:\\\\Users\\\\Administrator\\\\Downloads\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./likeFx.vue?vue&type=template&id=2e335c24&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!C:\\\\Users\\\\Administrator\\\\Downloads\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!C:\\\\Users\\\\Administrator\\\\Downloads\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!C:\\\\Users\\\\Administrator\\\\Downloads\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!C:\\\\Users\\\\Administrator\\\\Downloads\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!C:\\\\Users\\\\Administrator\\\\Downloads\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./likeFx.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!C:\\\\Users\\\\Administrator\\\\Downloads\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!C:\\\\Users\\\\Administrator\\\\Downloads\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!C:\\\\Users\\\\Administrator\\\\Downloads\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!C:\\\\Users\\\\Administrator\\\\Downloads\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!C:\\\\Users\\\\Administrator\\\\Downloads\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./likeFx.vue?vue&type=script&lang=js&\"","<template>\r\n  <view class=\"\">\r\n    <canvas canvas-id=\"bubble\" :style=\"'width:' + width + 'px;height:' + height + 'px'\" class=\"like-fx\"></canvas>\r\n  </view>\r\n</template>\r\n\r\n<script>\r\n  export default {\n    name: 'LikeFx',\r\n    data() {\r\n      return {\r\n        queue: {},\n        ctx: null,\r\n        timer: 0\r\n      }\r\n    },\r\n    props: {\r\n      height: {\r\n        type: Number,\r\n        default: 1920\r\n      },\r\n      width: {\r\n        type: Number,\r\n        default: 375\r\n      }\r\n    },\r\n    mounted() {\r\n      this.ctx = uni.createCanvasContext(\"bubble\")\n      this.queue = {}\n      console.log('likeFx mounted');\r\n    },\r\n    destroyed() {\n      console.log('likeFx destoryed');\r\n      this.clearTimer()\r\n    },\r\n    methods: {\r\n      /**点赞 */\r\n      likeClick() {\r\n\t\tconsole.log('开始点赞啦');\r\n        const image = \"/static/img/likeFx/\" + this.getRandomInt(1, 33) + \".png\";\r\n        const anmationData = {\r\n          id: new Date().getTime(),\r\n          timer: 0,\r\n          opacity: 0,\r\n          pathData: this.generatePathData(),\r\n          image: image,\r\n          factor: {\r\n            // speed: 0.0009, // 运动速度，值越小越慢\r\n            // t: 0.4//  贝塞尔函数系数，当为0，就是从无到有，这时候屏幕高度也要调一下\r\n            speed: 0.0006, // 运动速度，值越小越慢\r\n            t: 0.6 //  贝塞尔函数系数，当为0，就是从无到有，这时候屏幕高度也要调一下\r\n          }\r\n        };\r\n        if (Object.keys(this.queue).length > 0) {\r\n          this.queue[anmationData.id] = anmationData;\r\n        } else {\r\n          this.queue[anmationData.id] = anmationData;\r\n          this.bubbleAnimate();\r\n        }\n        \n        // console.log(image, this.queue);\r\n      },\r\n      /**获取最大最小随机值 */\r\n      getRandom(min, max) {\r\n        return Math.random() * (max - min) + min;\r\n      },\r\n      /**获取最大最小之前随机值的整数 */\r\n      getRandomInt(min, max) {\r\n        return Math.floor(Math.random() * (max - min + 1)) + min;\r\n      },\r\n      /**获取图片路径 */\r\n      generatePathData() {\r\n        let width = this.width,\r\n          height = this.height;\r\n        const p0 = {\r\n          x: 0.72 * width,\r\n          y: height\r\n        };\r\n        const p1 = {\r\n          x: this.getRandom(0.22 * width, 0.33 * width),\r\n          y: this.getRandom(0.5 * height, 0.75 * height)\r\n        };\r\n        const p2 = {\r\n          x: this.getRandom(0, 0.88 * width),\r\n          y: this.getRandom(0.25 * height, 0.5 * height)\r\n        };\r\n        const p3 = {\r\n          x: this.getRandom(0, 0.88 * width),\r\n          y: this.getRandom(0, 0.125 * height)\r\n        };\r\n        return [p0, p1, p2, p3];\r\n      },\r\n      /**更新图片的最新运动路径 */\r\n      updatePath(data, factor) {\r\n        const p0 = data[0];\r\n        const p1 = data[1];\r\n        const p2 = data[2];\r\n        const p3 = data[3];\r\n\r\n        const t = factor.t;\r\n\r\n        /*计算多项式系数 （下同）*/\r\n        const cx1 = 3 * (p1.x - p0.x);\r\n        const bx1 = 3 * (p2.x - p1.x) - cx1;\r\n        const ax1 = p3.x - p0.x - cx1 - bx1;\r\n\r\n        const cy1 = 3 * (p1.y - p0.y);\r\n        const by1 = 3 * (p2.y - p1.y) - cy1;\r\n        const ay1 = p3.y - p0.y - cy1 - by1;\r\n\r\n        const x = ax1 * (t * t * t) + bx1 * (t * t) + cx1 * t + p0.x;\r\n        const y = ay1 * (t * t * t) + by1 * (t * t) + cy1 * t + p0.y;\n        // console.log(data, x, y);\r\n        return {\r\n          x,\r\n          y\r\n        };\r\n      },\r\n      /**点赞动画 */\r\n      bubbleAnimate() {\r\n        let width = this.width,\r\n          height = this.height;\r\n        Object.keys(this.queue).forEach(key => {\r\n          const anmationData = this.queue[+key];\r\n          const {\r\n            x,\r\n            y\r\n          } = this.updatePath(\r\n            anmationData.pathData,\r\n            anmationData.factor\r\n          );\r\n          const speed = anmationData.factor.speed;\r\n          anmationData.factor.t += speed;\r\n\r\n          var curWidth = 30;\r\n          curWidth = (height - y) / 1.5;\r\n          curWidth = Math.min(30, curWidth);\r\n\r\n          var curAlpha = anmationData.opacity;\r\n          curAlpha = y / (0.3 * height); //消失的高度适当调一下\r\n          curAlpha = Math.min(1, curAlpha);\r\n          this.ctx.globalAlpha = curAlpha;\r\n          this.ctx.drawImage(anmationData.image, x - curWidth / 2, y, curWidth, curWidth);\n          // this.ctx.setFillStyle('red')\n          // this.ctx.fillRect(x - curWidth / 2, y, 50, 50)\r\n          if (anmationData.factor.t > 1) {\r\n            delete this.queue[anmationData.id];\r\n          }\r\n          if (y > height) {\r\n            delete this.queue[anmationData.id];\r\n          }\r\n        });\r\n        this.ctx.draw();\r\n        if (Object.keys(this.queue).length > 0) {\r\n          this.timer = setTimeout(() => {\r\n            this.bubbleAnimate();\r\n          }, 5);\r\n        } else {\r\n          this.clearTimer()\r\n          this.ctx.draw(); // 清空画面\r\n        }\r\n      },\n      clearTimer() {\n        if (this.timer) {\n          clearTimeout(this.timer)\n        }\n      }\r\n    }\r\n  }\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n  .like-fx {\r\n    position: fixed;\r\n    right: 0;\r\n    z-index: 1024;\r\n    pointer-events: none;\r\n    /* background-color: red; */\r\n  }\r\n</style>\n","import mod from \"-!C:\\\\Users\\\\Administrator\\\\Downloads\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--8-oneOf-1-0!C:\\\\Users\\\\Administrator\\\\Downloads\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-1!C:\\\\Users\\\\Administrator\\\\Downloads\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!C:\\\\Users\\\\Administrator\\\\Downloads\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-2!C:\\\\Users\\\\Administrator\\\\Downloads\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--8-oneOf-1-3!C:\\\\Users\\\\Administrator\\\\Downloads\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\sass-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-4!C:\\\\Users\\\\Administrator\\\\Downloads\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-5!C:\\\\Users\\\\Administrator\\\\Downloads\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!C:\\\\Users\\\\Administrator\\\\Downloads\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./likeFx.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!C:\\\\Users\\\\Administrator\\\\Downloads\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--8-oneOf-1-0!C:\\\\Users\\\\Administrator\\\\Downloads\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-1!C:\\\\Users\\\\Administrator\\\\Downloads\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!C:\\\\Users\\\\Administrator\\\\Downloads\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-2!C:\\\\Users\\\\Administrator\\\\Downloads\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--8-oneOf-1-3!C:\\\\Users\\\\Administrator\\\\Downloads\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\sass-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-4!C:\\\\Users\\\\Administrator\\\\Downloads\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-5!C:\\\\Users\\\\Administrator\\\\Downloads\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!C:\\\\Users\\\\Administrator\\\\Downloads\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./likeFx.vue?vue&type=style&index=0&lang=scss&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1627119169421\n      var cssReload = require(\"C:/Users/Administrator/Downloads/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}